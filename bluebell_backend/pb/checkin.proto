syntax = "proto3"; // ç‰ˆæœ¬å£°æ˜ï¼Œä½¿ç”¨Protocol Buffers v3ç‰ˆæœ¬

option go_package = "bluebell_backend/pb";

package pb; // åŒ…å

// ==========================
// ğŸ¯ ç­¾åˆ°æœåŠ¡å®šä¹‰
// ==========================
service CheckinService {
  // ç”¨æˆ·ç­¾åˆ°
  rpc UserCheckin (UserCheckinRequest) returns (UserCheckinResponse);
  
  // è·å–ç­¾åˆ°çŠ¶æ€
  rpc GetCheckinStatus (CheckinStatusRequest) returns (CheckinStatusResponse);
  
//  // è·å–ç­¾åˆ°æ’è¡Œæ¦œ
//  rpc GetCheckinRank (CheckinRankRequest) returns (CheckinRankResponse);
}

// ==========================
// ğŸ“‹ ç­¾åˆ°è¯·æ±‚æ¶ˆæ¯
// ==========================
message UserCheckinRequest {
  uint64 user_id = 1;           // ç”¨æˆ·ID
  int64 timestamp = 2;          // ç­¾åˆ°æ—¶é—´æˆ³
  string checkin_type = 3;      // ç­¾åˆ°ç±»å‹ï¼šnormal/è¡¥ç­¾/æ´»åŠ¨ç­¾åˆ°
}

// ==========================
// ğŸ“Š ç­¾åˆ°å“åº”æ¶ˆæ¯
// ==========================
message UserCheckinResponse {
  bool success = 1;             // æ˜¯å¦æˆåŠŸ
  string message = 2;           // æç¤ºä¿¡æ¯
  int32 continuous_days = 3;    // è¿ç»­ç­¾åˆ°å¤©æ•°
  int32 total_days = 4;        // æ€»ç­¾åˆ°å¤©æ•°
  int32 remain_retro_times = 5;
}

// ==========================
// ğŸ” ç­¾åˆ°çŠ¶æ€æŸ¥è¯¢è¯·æ±‚
// ==========================
message CheckinStatusRequest {
  uint64 user_id = 1;           // ç”¨æˆ·ID
  int64 timestamp = 2;
}

// ==========================
// ğŸ“ˆ ç­¾åˆ°çŠ¶æ€æŸ¥è¯¢å“åº”
// ==========================
message CheckinStatusResponse {
  repeated int32 checked_in_days = 1; // å½“æœˆç­¾åˆ°æ—¥æœŸåºå·ï¼Œä½¿ç”¨repeatedè¡¨ç¤ºæ•°ç»„
  repeated int32 retro_checked_in_days = 2;    // å½“æœˆè¡¥ç­¾æ—¥æœŸåºå·ï¼Œä½¿ç”¨repeatedè¡¨ç¤ºæ•°ç»„
}

//// ==========================
//// ğŸ“œ ç­¾åˆ°è®°å½•æŸ¥è¯¢è¯·æ±‚
//// ==========================
//message CheckinRecordsRequest {
//  uint64 user_id = 1;           // ç”¨æˆ·ID
//  int32 page = 2;              // é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
//  int32 page_size = 3;         // æ¯é¡µæ¡æ•°
//  string start_date = 4;       // å¼€å§‹æ—¥æœŸï¼ˆæ ¼å¼ï¼š2024-01-01ï¼‰
//  string end_date = 5;         // ç»“æŸæ—¥æœŸ
//}
//
//// ==========================
//// ğŸ“‹ ç­¾åˆ°è®°å½•æŸ¥è¯¢å“åº”
//// ==========================
//message CheckinRecordsResponse {
//  repeated CheckinRecord records = 1;  // ç­¾åˆ°è®°å½•åˆ—è¡¨
//  int32 total_count = 2;               // æ€»è®°å½•æ•°
//  bool has_more = 3;                   // æ˜¯å¦æœ‰æ›´å¤šæ•°æ®
//}

//// ==========================
//// ğŸ“… å•æ¡ç­¾åˆ°è®°å½•
//// ==========================
//message CheckinRecord {
//  string checkin_date = 1;      // ç­¾åˆ°æ—¥æœŸ
//  int32 continuous_days = 2;    // å½“æ—¥è¿ç»­å¤©æ•°
//  int32 reward_points = 3;      // å½“æ—¥å¥–åŠ±
//  string checkin_type = 4;      // ç­¾åˆ°ç±»å‹
//  int64 checkin_time = 5;       // ç­¾åˆ°æ—¶é—´æˆ³
//}
//
//// ==========================
//// ğŸ† æ’è¡Œæ¦œæŸ¥è¯¢è¯·æ±‚
//// ==========================
//message CheckinRankRequest {
//  string rank_type = 1;         // æ’è¡Œç±»å‹ï¼šcontinuous/total/monthly
//  int32 limit = 2;             // è¿”å›æ¡æ•°é™åˆ¶
//  uint64 current_user_id = 3;   // å½“å‰ç”¨æˆ·IDï¼ˆå¯é€‰ï¼Œç”¨äºæ˜¾ç¤ºç”¨æˆ·æ’åï¼‰
//}
//
//// ==========================
//// ğŸ¥‡ æ’è¡Œæ¦œæŸ¥è¯¢å“åº”
//// ==========================
//message CheckinRankResponse {
//  repeated RankItem ranks = 1;   // æ’è¡Œæ¦œæ•°æ®
//  int32 my_rank = 2;             // æˆ‘çš„æ’åï¼ˆå¦‚æœæœ‰current_user_idï¼‰
//  int32 my_continuous_days = 3;  // æˆ‘çš„è¿ç»­ç­¾åˆ°å¤©æ•°
//}
//
//// ==========================
//// ğŸ–ï¸ æ’è¡Œæ¦œå•é¡¹
//// ==========================
//message RankItem {
//  uint64 user_id = 1;          // ç”¨æˆ·ID
//  string username = 2;         // ç”¨æˆ·å
//  string avatar = 3;           // å¤´åƒURL
//  int32 rank = 4;              // æ’å
//  int32 continuous_days = 5;   // è¿ç»­ç­¾åˆ°å¤©æ•°
//  int32 total_days = 6;        // æ€»ç­¾åˆ°å¤©æ•°
//}
